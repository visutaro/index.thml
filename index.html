<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>習慣トラッカー</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="data:application/json;base64,ewogICJuYW1lIjogIuezleaFo+ODiOODqeODg+OCq+ODvCIsCiAgInNob3J0X25hbWUiOiAi57+S5oWjIiwKICAic3RhcnRfdXJsIjogIi4iLAogICJkaXNwbGF5IjogInN0YW5kYWxvbmUiLAogICJiYWNrZ3JvdW5kX2NvbG9yIjogIiMwYTBhMGEiLAogICJ0aGVtZV9jb2xvciI6ICIjZmY2YjZiIgp9">
</head>
<body>
    <div class="app-container">
        <div class="header">
            <h1>TRACKER</h1>
        </div>

        <div class="tabs">
            <div class="tab active" data-tab="25tap">25TAP</div>
            <div class="tab" data-tab="hiit">HIIT</div>
            <div class="tab" data-tab="meditation">瞑想</div>
            <div class="tab" data-tab="settings">設定</div>
        </div>

        <div class="content">
            <!-- 25Tap Panel -->
            <div class="panel active" id="25tap">
                <div class="game-info">
                    <div class="info-item">
                        <div class="info-label">ラウンド</div>
                        <div class="info-value" id="roundNumber">0/3</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">次</div>
                        <div class="info-value" id="nextNumber">-</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">タイム</div>
                        <div class="info-value" id="gameTime">0.00</div>
                    </div>
                </div>

                <div id="roundResults" class="round-results"></div>

                <div class="game-grid" id="gameGrid"></div>

                <button class="btn" id="startGameBtn">スタート</button>
                <button class="btn" id="recordGameBtn" style="display: none; background: var(--success);">記録する</button>
            </div>

            <!-- HIIT Panel -->
            <div class="panel" id="hiit">
                <div class="video-container" id="videoContainer">
                    <div style="display: flex; align-items: center; justify-content: center; height: 100%; color: var(--text-dim);">
                        設定からYouTube URLを入力してください
                    </div>
                </div>

                <div class="sets-counter">
                    <button class="sets-btn" id="setsDown">−</button>
                    <div class="sets-display" id="setsCount">0</div>
                    <button class="sets-btn" id="setsUp">+</button>
                </div>

                <button class="btn" id="completeHiit">完了</button>
            </div>

            <!-- 瞑想 Panel -->
            <div class="panel" id="meditation">
                <div class="timer-display">
                    <div class="timer-time" id="timerDisplay">00:00</div>
                </div>

                <div class="timer-presets">
                    <button class="preset-btn" data-minutes="5">5分</button>
                    <button class="preset-btn" data-minutes="10">10分</button>
                    <button class="preset-btn" data-minutes="15">15分</button>
                    <button class="preset-btn" data-minutes="20">20分</button>
                    <button class="preset-btn" data-minutes="25">25分</button>
                    <button class="preset-btn" data-minutes="30">30分</button>
                </div>

                <div class="notification-toggle">
                    <button class="toggle-btn active" id="soundToggle">🔔 音</button>
                    <button class="toggle-btn" id="vibrateToggle">📳 振動</button>
                </div>

                <div class="timer-controls">
                    <button class="btn" id="startTimer" style="flex: 1;">開始</button>
                    <button class="btn" id="stopTimer" style="flex: 1; background: var(--border);">停止</button>
                </div>
            </div>

            <!-- 設定 Panel -->
            <div class="panel" id="settings">
                <div class="input-group">
                    <label>スプレッドシートURL（Apps ScriptのデプロイURL）</label>
                    <input type="text" id="scriptUrl" placeholder="https://script.google.com/macros/s/...">
                    <div class="hint">Apps Scriptでデプロイした「ウェブアプリ」のURLを貼り付けてください</div>
                </div>
                
                <div class="input-group">
                    <label>HIIT動画URL（YouTubeの共有URL）</label>
                    <input type="text" id="hiitUrl" placeholder="https://youtu.be/...">
                </div>
                
                <button class="btn" id="saveSettings">保存</button>
            </div>
        </div>
    </div>

    <!-- 記録Modal -->
    <div class="modal" id="recordModal">
        <div class="modal-content">
            <div class="modal-title" id="modalTitle">記録を保存</div>
            
            <div class="result-display" id="resultDisplay" style="display: none;">
                <div class="result-value" id="resultValue">--</div>
                <div class="result-label" id="resultLabel">--</div>
            </div>

            <div class="rating-group">
                <label>体調（1-5）</label>
                <div class="rating-buttons" id="conditionRating"></div>
            </div>

            <div class="rating-group" id="moodGroup" style="display: none;">
                <label>瞑想後の気分（1-5）</label>
                <div class="rating-buttons" id="moodRating"></div>
            </div>

            <div class="input-group">
                <label>メモ（任意）</label>
                <textarea id="memoText" placeholder="サウナ後、寝起き、電車、など..."></textarea>
            </div>

            <div class="modal-buttons">
                <button class="btn" id="cancelRecord" style="background: var(--border);">キャンセル</button>
                <button class="btn" id="saveRecord">保存</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
